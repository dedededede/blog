<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一直在路上</title>
  <subtitle>码农 攻城狮</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-05-29T14:59:12.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>zhangdede</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python中深拷贝和浅拷贝的区别</title>
    <link href="http://yoursite.com/2016/05/29/python%E4%B8%AD%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://yoursite.com/2016/05/29/python中深拷贝和浅拷贝的区别/</id>
    <published>2016-05-29T14:55:14.000Z</published>
    <updated>2016-05-29T14:59:12.000Z</updated>
    
    <content type="html">&lt;p&gt;Python中，对象的赋值，拷贝（深/浅拷贝）之间是有差异的，如果使用的时候不注意，就可能产生意外的结果。&lt;br&gt;看一段代码：&lt;/p&gt;
&lt;h3 id=&quot;对象赋值&quot;&gt;&lt;a href=&quot;#对象赋值&quot; class=&quot;headerlink&quot; title=&quot;对象赋值&quot;&gt;&lt;/a&gt;对象赋值&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will = [&lt;span class=&quot;string&quot;&gt;&quot;Will&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&quot;Python&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;C#&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;JavaScript&quot;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wilber = will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;Wilber&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;].append(&lt;span class=&quot;string&quot;&gt;&quot;CSS&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输出结果为&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4544690944&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4544800976&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140550176003168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4544649408&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4544690944&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4544800976&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140550176003168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4544649408&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4544690944&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Wilber&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;CSS&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4544801168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140550176003168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4544649408&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4544690944&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Wilber&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;CSS&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4544801168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140550176003168&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4544649408&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;结论：&lt;/p&gt;
&lt;p&gt;首先，创建了一个名为will的变量，这个变量指向一个list对象，&lt;br&gt;然后，通过will变量对wilber变量进行赋值，那么wilber变量将指向will变量对应的对象（内存地址），也就是说”wilber is will”，”wilber[i] is will[i]”&lt;br&gt;可以理解为，Python中，对象的赋值都是进行对象引用（内存地址）传递。由于will和wilber指向同一个对象，所以对will的任何修改都会体现在wilber上。这里需要注意的一点是，str是不可变类型，所以当修改的时候会替换旧的对象，产生一个新的地址4544801168。&lt;/p&gt;
&lt;h3 id=&quot;浅拷贝&quot;&gt;&lt;a href=&quot;#浅拷贝&quot; class=&quot;headerlink&quot; title=&quot;浅拷贝&quot;&gt;&lt;/a&gt;浅拷贝&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; copy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will = [&lt;span class=&quot;string&quot;&gt;&quot;Will&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&quot;Python&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;C#&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;JavaScript&quot;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wilber = copy.copy(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;Wilber&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;].append(&lt;span class=&quot;string&quot;&gt;&quot;CSS&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;代码的输出为：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4447607552&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4447643856&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140645294429744&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4447607480&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4447608776&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4447643856&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140645294429744&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4447607480&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4447607552&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Wilber&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;CSS&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4447644048&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140645294429744&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4447607480&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4447608776&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;CSS&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4447643856&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140645294429744&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4447607480&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结论：&lt;/p&gt;
&lt;p&gt;首先，依然使用一个will变量，指向一个list类型的对象&lt;br&gt;然后，通过copy模块里面的浅拷贝函数copy()，对will指向的对象进行浅拷贝，然后浅拷贝生成的新对象赋值给wilber变量&lt;br&gt;浅拷贝会创建一个新的对象，这个例子中”wilber is not will”&lt;br&gt;但是，对于对象中的元素，浅拷贝就只会使用原始元素的引用（内存地址），也就是说”wilber[i] is will[i]”&lt;/p&gt;
&lt;p&gt;当对will进行修改的时候&lt;br&gt;由于list的第一个元素是不可变类型，所以will对应的list的第一个元素会使用一个新的对象4447644048。&lt;br&gt;但是list的第三个元素是一个可变类型，修改操作不会产生新的对象，所以will的修改结果会相应的反应到wilber上&lt;/p&gt;
&lt;p&gt;总结一下，当我们使用下面的操作的时候，会产生浅拷贝的效果：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用切片[:]操作&lt;/li&gt;
&lt;li&gt;使用工厂函数（如list/dir/set）&lt;/li&gt;
&lt;li&gt;使用copy模块中的copy()函数&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;深拷贝&quot;&gt;&lt;a href=&quot;#深拷贝&quot; class=&quot;headerlink&quot; title=&quot;深拷贝&quot;&gt;&lt;/a&gt;深拷贝&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; copy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will = [&lt;span class=&quot;string&quot;&gt;&quot;Will&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&quot;Python&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;C#&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;JavaScript&quot;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wilber = copy.deepcopy(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;Wilber&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;].append(&lt;span class=&quot;string&quot;&gt;&quot;CSS&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(will)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; will]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; id(wilber)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; wilber&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [id(ele) &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ele &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; wilber]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;代码的结果为：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4374686464&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4374722768&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140462247663152&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4374686392&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4374687688&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4374722768&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140462247663152&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4374794320&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4374686464&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Wilber&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;CSS&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4374723008&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140462247663152&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4374686392&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4374687688&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;Will&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;Python&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;C#&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;JavaScript&#39;&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;4374722768&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;140462247663152&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4374794320&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结论：&lt;/p&gt;
&lt;p&gt;首先，同样使用一个will变量，指向一个list类型的对象&lt;br&gt;然后，通过copy模块里面的深拷贝函数deepcopy()，对will指向的对象进行深拷贝，然后深拷贝生成的新对象赋值给wilber变量&lt;br&gt;跟浅拷贝类似，深拷贝也会创建一个新的对象，这个例子中”wilber is not will”&lt;br&gt;但是，对于对象中的元素，深拷贝都会重新生成一份（有特殊情况，下面会说明），而不是简单的使用原始元素的引用（内存地址）&lt;br&gt;例子中will的第三个元素指向4374686392，而wilber的第三个元素是一个全新的对象4374794320，也就是说，”wilber[2] is not will[2]”&lt;/p&gt;
&lt;p&gt;当对will进行修改的时候&lt;br&gt;由于list的第一个元素是不可变类型，所以will对应的list的第一个元素会使用一个新的对象4374723008&lt;br&gt;但是list的第三个元素是一个可变类型，修改操作不会产生新的对象，但是由于”wilber[2] is not will[2]”，所以will的修改不会影响wilber&lt;/p&gt;
&lt;p&gt;拷贝的特殊情况&lt;/p&gt;
&lt;p&gt;其实，对于拷贝有一些特殊情况：&lt;/p&gt;
&lt;p&gt;对于非容器类型（如数字、字符串、和其他’原子’类型的对象）没有拷贝这一说&lt;br&gt;也就是说，对于这些类型，”obj is copy.copy(obj)” 、”obj is copy.deepcopy(obj)”&lt;/p&gt;
&lt;p&gt;如果元祖变量只包含原子类型对象，则不能深拷贝。&lt;/p&gt;
&lt;h4 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h4&gt;&lt;p&gt;本文介绍了对象的赋值和拷贝，以及它们之间的差异：&lt;/p&gt;
&lt;p&gt;Python中对象的赋值都是进行对象引用（内存地址）传递&lt;br&gt;使用copy.copy()，可以进行对象的浅拷贝，它复制了对象，但对于对象中的元素，依然使用原始的引用.&lt;br&gt;如果需要复制一个容器对象，以及它里面的所有元素（包含元素的子元素），可以使用copy.deepcopy()进行深拷贝&lt;br&gt;对于非容器类型（如数字、字符串、和其他’原子’类型的对象）没有被拷贝一说&lt;br&gt;如果元祖变量只包含原子类型对象，则不能深拷贝。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Python中，对象的赋值，拷贝（深/浅拷贝）之间是有差异的，如果使用的时候不注意，就可能产生意外的结果。&lt;br&gt;看一段代码：&lt;/p&gt;
&lt;h3 id=&quot;对象赋值&quot;&gt;&lt;a href=&quot;#对象赋值&quot; class=&quot;headerlink&quot; title=&quot;对象赋值&quot;&gt;&lt;/a&gt;对象赋
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>CentOS中Redis Cluster搭建</title>
    <link href="http://yoursite.com/2016/05/22/CentOS%E4%B8%ADRedis-Cluster%E6%90%AD%E5%BB%BA/"/>
    <id>http://yoursite.com/2016/05/22/CentOS中Redis-Cluster搭建/</id>
    <published>2016-05-22T12:34:07.000Z</published>
    <updated>2016-05-22T12:39:30.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h4&gt;&lt;p&gt;Redis 集群是一个提供在多个Redis间节点间共享数据的程序集。&lt;br&gt;Redis集群并不支持处理多个keys的命令,因为这需要在不同的节点间移动数据,从而达不到像Redis那样的性能,在高负载的情况下可能会导致不可预料的错误.&lt;br&gt;Redis 集群通过分区来提供一定程度的可用性,在实际环境中当某个节点宕机或者不可达的情况下继续处理命令. &lt;/p&gt;
&lt;p&gt;Redis 集群的优势:&lt;br&gt;自动分割数据到不同的节点上。&lt;br&gt;整个集群的部分节点失败或者不可达的情况下能够继续处理命令。&lt;/p&gt;
&lt;h4 id=&quot;环境准备&quot;&gt;&lt;a href=&quot;#环境准备&quot; class=&quot;headerlink&quot; title=&quot;环境准备&quot;&gt;&lt;/a&gt;环境准备&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;安装ruby&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yum install ruby&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装rubygems&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yum install rubygems&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装ruby的redis包&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;gem install redis&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下载&lt;a href=&quot;http://download.redis.io/releases/redis-3.2.0.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;redis&lt;/a&gt;&lt;br&gt;要下载redis 3.0 以上的版本&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;安装redis-cluster&quot;&gt;&lt;a href=&quot;#安装redis-cluster&quot; class=&quot;headerlink&quot; title=&quot;安装redis cluster&quot;&gt;&lt;/a&gt;安装redis cluster&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;安装redis,详细步骤请&lt;a href=&quot;http://responseip.com/2016/05/15/CentOS-%E5%AE%89%E8%A3%85redis/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;参考&lt;/a&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/redis-cluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/redis-cluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir 7000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir 7001&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir 7002&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;配置redis cluster&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim redis.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port 7000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;daemonize yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cluster-enabled yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cluster-config-file nodes.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cluster-node-timeout 5000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;appendonly yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同理每一个文件夹下面的redis.conf都做相应的修改&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;创建集群&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./redis-trib.rb  create 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;验证&lt;br&gt;redis-cli -c -p 7000&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h4&gt;&lt;p&gt;Redis 集群是一个提供在多个Redis间节点间共享数据的程序集。&lt;br&gt;Redis集群并不支持处理多个keys的命令,因为这需要在不同的
    
    </summary>
    
      <category term="redis" scheme="http://yoursite.com/categories/redis/"/>
    
    
      <category term="redis" scheme="http://yoursite.com/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 安装redis</title>
    <link href="http://yoursite.com/2016/05/15/CentOS-%E5%AE%89%E8%A3%85redis/"/>
    <id>http://yoursite.com/2016/05/15/CentOS-安装redis/</id>
    <published>2016-05-15T14:43:52.000Z</published>
    <updated>2016-05-15T15:01:40.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;安装redis&quot;&gt;&lt;a href=&quot;#安装redis&quot; class=&quot;headerlink&quot; title=&quot;安装redis&quot;&gt;&lt;/a&gt;安装redis&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;wget &lt;a href=&quot;http://download.redis.io/releases/redis-3.2.0.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://download.redis.io/releases/redis-3.2.0.tar.gz&lt;/a&gt;&lt;br&gt;tar xvzf redis-3.2.0&lt;br&gt;cd redis-3.2.0&lt;br&gt;make&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;异常一：&quot;&gt;&lt;a href=&quot;#异常一：&quot; class=&quot;headerlink&quot; title=&quot;异常一：&quot;&gt;&lt;/a&gt;异常一：&lt;/h4&gt;&lt;p&gt;执行make的时候，出现了异常。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;make[2]: cc: Command not found&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;异常原因：没有安装gcc&lt;br&gt;解决方案：yum install gcc-c++&lt;/p&gt;
&lt;h4 id=&quot;异常二：&quot;&gt;&lt;a href=&quot;#异常二：&quot; class=&quot;headerlink&quot; title=&quot;异常二：&quot;&gt;&lt;/a&gt;异常二：&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zmalloc.h:51:31: error: jemalloc/jemalloc.h: No such file or directory&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;异常原因：一些编译依赖或原来编译遗留出现的问题&lt;br&gt;解决方案：make distclean。清理一下，然后再make。&lt;/p&gt;
&lt;h4 id=&quot;异常三：&quot;&gt;&lt;a href=&quot;#异常三：&quot; class=&quot;headerlink&quot; title=&quot;异常三：&quot;&gt;&lt;/a&gt;异常三：&lt;/h4&gt;&lt;p&gt;在make成功以后，需要make test, 在make test出现异常。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;couldn&lt;span class=&quot;string&quot;&gt;&#39;t execute &quot;tclsh8.5&quot;: no such file or directory&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;异常原因：没有安装tcl&lt;br&gt;解决方案：yum install -y tcl。&lt;/p&gt;
&lt;h4 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h4&gt;&lt;p&gt;在make成功以后，会在src目录下多出一些可执行文件：redis-server，redis-cli等等。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cp redis-server /usr/local/bin/&lt;br&gt;cp redis-cli /usr/local/bin/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后新建目录，存放配置文件&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;mkdir /etc/redis&lt;br&gt;mkdir /var/redis&lt;br&gt;mkdir /var/redis/log&lt;br&gt;mkdir /var/redis/run&lt;br&gt;mkdir /var/redis/6379&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在redis解压根目录中找到配置文件模板，复制到如下位置。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cp redis.conf /etc/redis/6379.conf&lt;br&gt;vim /etc/redis/6379.conf&lt;br&gt;daemonize yes&lt;br&gt;pidfile /var/redis/run/redis_6379.pid&lt;br&gt;logfile /var/redis/log/redis_6379.log&lt;br&gt;dir /var/redis/6379&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;开机启动&quot;&gt;&lt;a href=&quot;#开机启动&quot; class=&quot;headerlink&quot; title=&quot;开机启动&quot;&gt;&lt;/a&gt;开机启动&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;cp utils/redis_init_script /etc/init.d/redis_6379&lt;br&gt;vim /etc/init.d/redis&lt;em&gt;6379&lt;br&gt;pid修改成 /var/redis/run/redis&lt;/em&gt;${REDISPORT}.pid&lt;br&gt;update-rc.d redis_6379 defaults&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;安装redis&quot;&gt;&lt;a href=&quot;#安装redis&quot; class=&quot;headerlink&quot; title=&quot;安装redis&quot;&gt;&lt;/a&gt;安装redis&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;wget &lt;a href=&quot;http://download.redis.i
    
    </summary>
    
      <category term="redis" scheme="http://yoursite.com/categories/redis/"/>
    
    
      <category term="redis" scheme="http://yoursite.com/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>mysql 配置主从</title>
    <link href="http://yoursite.com/2016/05/08/mysql-%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8E/"/>
    <id>http://yoursite.com/2016/05/08/mysql-配置主从/</id>
    <published>2016-05-08T00:31:21.000Z</published>
    <updated>2016-05-08T01:00:30.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;环境准备&quot;&gt;&lt;a href=&quot;#环境准备&quot; class=&quot;headerlink&quot; title=&quot;环境准备&quot;&gt;&lt;/a&gt;环境准备&lt;/h2&gt;&lt;p&gt;1.1 分别在主从服务器上安装相同版本的&lt;a href=&quot;http://responseip.com/2016/04/21/CentOS-6-5-%E5%AE%89%E8%A3%85mysql-5-7-9/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mysql&lt;/a&gt;&lt;br&gt;1.2 修改主服务器的配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; vim /etc/my.cnf
&amp;gt; [mysqld]
&amp;gt; log-bin = mysql-bin //启用二进制文件
&amp;gt; server-id = 44  //服务器ID，唯一ID

然后重启mysql服务
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;1.3 修改从服务器的配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; vim /etc/my.cnf
&amp;gt; [mysqld]
&amp;gt; log-bin = mysql-bin  //启用二进制文件
&amp;gt; server-id = 45  //这里采用的是机器的IP

然后重启mysql服务
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;建立主从同步账号&quot;&gt;&lt;a href=&quot;#建立主从同步账号&quot; class=&quot;headerlink&quot; title=&quot;建立主从同步账号&quot;&gt;&lt;/a&gt;建立主从同步账号&lt;/h2&gt;&lt;p&gt;   在主服务器上执行&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;mysql -h127.0.0.1 -uroot -p’’&lt;br&gt;mysql&amp;gt; grant replcation slave on ‘&lt;em&gt;.&lt;/em&gt;‘ to ‘账号’@’%’ identified by ‘密码’;&lt;br&gt;mysql&amp;gt; flush privileges;&lt;br&gt;mysql&amp;gt; show master status;&lt;br&gt;     +——————+———-+————–+——————+&lt;br&gt;   | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |&lt;br&gt;   +——————+———-+————–+——————+&lt;br&gt;   | mysql-bin.000001 |      150 |              |                  |&lt;br&gt;   +——————+———-+————–+——————+&lt;br&gt;   1 row in set (0.00 sec)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;   记录下来FIle和Position&lt;/p&gt;
&lt;h2 id=&quot;配置从服务器&quot;&gt;&lt;a href=&quot;#配置从服务器&quot; class=&quot;headerlink&quot; title=&quot;配置从服务器&quot;&gt;&lt;/a&gt;配置从服务器&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;mysql&amp;gt; change master to master_host=’主服务器IP’,master_user=’主从同步账号’,master_password=’密码’,master_log_file=’mysql-bin.000001’,master_log_pos=150;&lt;br&gt;mysql&amp;gt; start slave;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;验证&quot;&gt;&lt;a href=&quot;#验证&quot; class=&quot;headerlink&quot; title=&quot;验证&quot;&gt;&lt;/a&gt;验证&lt;/h2&gt;&lt;p&gt;  在主服务器上执行一条sql，去从服务器上查看一下是否执行成功&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;环境准备&quot;&gt;&lt;a href=&quot;#环境准备&quot; class=&quot;headerlink&quot; title=&quot;环境准备&quot;&gt;&lt;/a&gt;环境准备&lt;/h2&gt;&lt;p&gt;1.1 分别在主从服务器上安装相同版本的&lt;a href=&quot;http://responseip.com/2016/04/21/
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6.5 安装mysql 5.7.9</title>
    <link href="http://yoursite.com/2016/04/21/CentOS-6-5-%E5%AE%89%E8%A3%85mysql-5-7-9/"/>
    <id>http://yoursite.com/2016/04/21/CentOS-6-5-安装mysql-5-7-9/</id>
    <published>2016-04-21T13:20:59.000Z</published>
    <updated>2016-04-21T15:05:26.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;1-准备工作&quot;&gt;&lt;a href=&quot;#1-准备工作&quot; class=&quot;headerlink&quot; title=&quot;1.准备工作&quot;&gt;&lt;/a&gt;1.准备工作&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; wget http://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.9.tar.gz
&amp;gt; wget http://www.boost.org/users/download/

安装之前最好检查一下是否已安装了mysql和boost
&amp;gt; rpm -qa | grep mysql   //查看系统自带mysql
&amp;gt; yum -y remove mysql-*   //卸载mysql
&amp;gt; rpm -e --nodeps mysql-5.1.73-3.el6_5.x86_64 //卸载mysql
&amp;gt; rpm -qa | grep boost    //查看系统自带boost
&amp;gt; yum -y remove boost-*   //卸载boost
&amp;gt; rpm -e --nodeps boost-filesystem-1.41.0-11.el6_1.2.x86_64 //卸载boost

然后安装其它得依赖包：

&amp;gt; yum install gcc gcc-c++ ncurses ncurses-devel bison libgcrypt cmake
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;2-准备安装&quot;&gt;&lt;a href=&quot;#2-准备安装&quot; class=&quot;headerlink&quot; title=&quot;2.准备安装&quot;&gt;&lt;/a&gt;2.准备安装&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;首先将boost库解压出来
&amp;gt; tar -zxvf boost_1_59_0.tar.gz
然后拷贝到一个目录中
&amp;gt; mv boost_1_59_0 /usr/local/boost
注：如果不想安装boost的话，那么在编译mysql的时候指定DDOWNLOAD_BOOST=1
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;3-然后创建用户组以及用户&quot;&gt;&lt;a href=&quot;#3-然后创建用户组以及用户&quot; class=&quot;headerlink&quot; title=&quot;3.然后创建用户组以及用户&quot;&gt;&lt;/a&gt;3.然后创建用户组以及用户&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; cat /etc/group | grep mysql     //查看是否存在mysql用户组
&amp;gt; cat /etc/passwd | grep mysql    //查看是否存在mysql用户
&amp;gt; groupadd mysql                  //创建用户组
&amp;gt; useradd -r -g mysql mysql       //创建用户
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;4-编译mysql&quot;&gt;&lt;a href=&quot;#4-编译mysql&quot; class=&quot;headerlink&quot; title=&quot;4.编译mysql&quot;&gt;&lt;/a&gt;4.编译mysql&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; tar -xzvf mysql-5.7.9.tar.gz 
&amp;gt; cd mysql-5.7.9

使用cmake和make命令来进行编译
&amp;gt; cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DMYSQL_TCP_PORT=3306 -DMYSQL_USER=mysql -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DENABLE_DOWNLOADS=1 -DDOWNLOAD_BOOST=1 -DWITH_BOOST=/usr/local/boost
&amp;gt; make
&amp;gt; make install
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;5-创建mysql日志文件夹和pid文件夹&quot;&gt;&lt;a href=&quot;#5-创建mysql日志文件夹和pid文件夹&quot; class=&quot;headerlink&quot; title=&quot;5.创建mysql日志文件夹和pid文件夹&quot;&gt;&lt;/a&gt;5.创建mysql日志文件夹和pid文件夹&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; mkdir /usr/local/mysql/logs
&amp;gt; mkdir /usr/local/mysql/pids
&amp;gt; chown -R mysql:mysql /usr/local/mysql  //需要root

随后，我们需要配置/etc/my.cnf文件：
&amp;gt; vim /etc/my.cnf
然后写入参数，最终如下；
[mysqld]
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/mysql.sock
[mysql_safe]
log-error=/usr/local/mysql/logs/mysqld.log
pid-file=/usr/local/mysql/pids/mysqld.pid
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;6-初始化mysql&quot;&gt;&lt;a href=&quot;#6-初始化mysql&quot; class=&quot;headerlink&quot; title=&quot;6.初始化mysql&quot;&gt;&lt;/a&gt;6.初始化mysql&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; cp support-files/mysql.server /etc/init.d/mysqld
&amp;gt; chmod a+x /etc/init.d/mysqld //需要root权限
然后将mysql添加到环境变量，修改/etc/profile文件
&amp;gt; vim /etc/profile   //需要root

在文件的最后面加入
export PATH=/usr/local/mysql/bin:/usr/local/mysql/lib:$PATH
最后执行 
&amp;gt; source /etc/profile

随后我们也需要多数据库进行初始化操作。自 mysql5.7 开始，初始化系统表不再使用 mysql_install_db 工具, 而是使用 mysqld –initialize-insecure –user=mysql , 其中 –initialize 表示默认生成一个安全的密码, –initialize-insecure 表示不生成密码, 密码为空

&amp;gt; mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data
现在可以启动mysql 服务器：

&amp;gt; chkconfig mysqld on
最后我们将root密码修改一下：

&amp;gt; mysql -u root
&amp;gt; mysql &amp;gt; use mysql;
&amp;gt; mysql &amp;gt; update user set authentication_string=password(&amp;apos;123456&amp;apos;) where user=&amp;apos;root&amp;apos; and Host = &amp;apos;localhost&amp;apos;;
&amp;gt; mysql &amp;gt; create user &amp;apos;test_user&amp;apos;@&amp;apos;%&amp;apos; identified by &amp;apos;test_user&amp;apos;;
&amp;gt; mysql &amp;gt; grant all privileges on *.* to &amp;apos;test_user&amp;apos;@&amp;apos;%&amp;apos; identified by &amp;apos;test_user&amp;apos;;
&amp;gt; mysql &amp;gt; flush privileges;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;7-开放3306端口&quot;&gt;&lt;a href=&quot;#7-开放3306端口&quot; class=&quot;headerlink&quot; title=&quot;7.开放3306端口&quot;&gt;&lt;/a&gt;7.开放3306端口&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; /sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT
&amp;gt; /etc/rc.d/init.d/iptables save
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-准备工作&quot;&gt;&lt;a href=&quot;#1-准备工作&quot; class=&quot;headerlink&quot; title=&quot;1.准备工作&quot;&gt;&lt;/a&gt;1.准备工作&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; wget http://cdn.mysql.com//Downloads/MySQ
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>CentOS中搭建mysql5.1</title>
    <link href="http://yoursite.com/2016/04/17/CentOS%E4%B8%AD%E6%90%AD%E5%BB%BAmysql5-1/"/>
    <id>http://yoursite.com/2016/04/17/CentOS中搭建mysql5-1/</id>
    <published>2016-04-17T13:36:52.000Z</published>
    <updated>2016-04-17T13:43:19.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;本地新建虚拟机，并配置mysql环境&quot;&gt;&lt;a href=&quot;#本地新建虚拟机，并配置mysql环境&quot; class=&quot;headerlink&quot; title=&quot;本地新建虚拟机，并配置mysql环境&quot;&gt;&lt;/a&gt;本地新建虚拟机，并配置mysql环境&lt;/h2&gt;&lt;h3 id=&quot;1-搭建虚拟机-安装centos环境&quot;&gt;&lt;a href=&quot;#1-搭建虚拟机-安装centos环境&quot; class=&quot;headerlink&quot; title=&quot;1.搭建虚拟机,安装centos环境&quot;&gt;&lt;/a&gt;1.搭建虚拟机,安装centos环境&lt;/h3&gt;&lt;h4 id=&quot;1-1-下载virtualbox&quot;&gt;&lt;a href=&quot;#1-1-下载virtualbox&quot; class=&quot;headerlink&quot; title=&quot;1.1 下载virtualbox&quot;&gt;&lt;/a&gt;1.1 下载&lt;a href=&quot;https://www.virtualbox.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;virtualbox&lt;/a&gt;&lt;/h4&gt;&lt;h4 id=&quot;1-2-下载centos6-5&quot;&gt;&lt;a href=&quot;#1-2-下载centos6-5&quot; class=&quot;headerlink&quot; title=&quot;1.2 下载centos6.5&quot;&gt;&lt;/a&gt;1.2 下载&lt;a href=&quot;http://124.205.69.163/files/501700000008DED0/mirror.neu.edu.cn/centos/6.5/isos/x86_64/CentOS-6.5-x86_64-bin-DVD1.iso&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;centos6.5&lt;/a&gt;&lt;/h4&gt;&lt;h4 id=&quot;1-3-安装virtualbox，建立centos系统这里就不再赘述了&quot;&gt;&lt;a href=&quot;#1-3-安装virtualbox，建立centos系统这里就不再赘述了&quot; class=&quot;headerlink&quot; title=&quot;1.3 安装virtualbox，建立centos系统这里就不再赘述了&quot;&gt;&lt;/a&gt;1.3 安装virtualbox，建立centos系统这里就不再赘述了&lt;/h4&gt;&lt;h3 id=&quot;2-在虚拟机中搭建mysql环境&quot;&gt;&lt;a href=&quot;#2-在虚拟机中搭建mysql环境&quot; class=&quot;headerlink&quot; title=&quot;2.在虚拟机中搭建mysql环境&quot;&gt;&lt;/a&gt;2.在虚拟机中搭建mysql环境&lt;/h3&gt;&lt;h4 id=&quot;2-1-yum安装mysql&quot;&gt;&lt;a href=&quot;#2-1-yum安装mysql&quot; class=&quot;headerlink&quot; title=&quot;2.1 yum安装mysql&quot;&gt;&lt;/a&gt;2.1 yum安装mysql&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; yum -y install mysql-server
&amp;gt; yum -y install mysql-client
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-2-设置MySQL的root用户设置密码&quot;&gt;&lt;a href=&quot;#2-2-设置MySQL的root用户设置密码&quot; class=&quot;headerlink&quot; title=&quot;2.2 设置MySQL的root用户设置密码&quot;&gt;&lt;/a&gt;2.2 设置MySQL的root用户设置密码&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; mysqladmin -uroot password &amp;apos;密码&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-3-给账户赋予权限&quot;&gt;&lt;a href=&quot;#2-3-给账户赋予权限&quot; class=&quot;headerlink&quot; title=&quot;2.3 给账户赋予权限&quot;&gt;&lt;/a&gt;2.3 给账户赋予权限&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; use mysql;
&amp;gt; create user &amp;apos;test_user&amp;apos;@&amp;apos;%&amp;apos; identified by &amp;apos;test_user&amp;apos;;
&amp;gt; grant all privileges on *.* to &amp;apos;test_user&amp;apos;@&amp;apos;%&amp;apos; identified by &amp;apos;test_user&amp;apos;;
&amp;gt; flush privileges;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-4-重新启动mysql&quot;&gt;&lt;a href=&quot;#2-4-重新启动mysql&quot; class=&quot;headerlink&quot; title=&quot;2.4 重新启动mysql&quot;&gt;&lt;/a&gt;2.4 重新启动mysql&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; /etc/init.d/mysqld restart
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-5-centos-默认是不开放端口的，所以需要开放3306端口&quot;&gt;&lt;a href=&quot;#2-5-centos-默认是不开放端口的，所以需要开放3306端口&quot; class=&quot;headerlink&quot; title=&quot;2.5 centos 默认是不开放端口的，所以需要开放3306端口&quot;&gt;&lt;/a&gt;2.5 centos 默认是不开放端口的，所以需要开放3306端口&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;&amp;gt; /sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT
&amp;gt; /etc/rc.d/init.d/iptables save
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;至此，这样就可以从外部访问mysql了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;本地新建虚拟机，并配置mysql环境&quot;&gt;&lt;a href=&quot;#本地新建虚拟机，并配置mysql环境&quot; class=&quot;headerlink&quot; title=&quot;本地新建虚拟机，并配置mysql环境&quot;&gt;&lt;/a&gt;本地新建虚拟机，并配置mysql环境&lt;/h2&gt;&lt;h3 id=&quot;1
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux,mysql" scheme="http://yoursite.com/tags/linux-mysql/"/>
    
  </entry>
  
  <entry>
    <title>python import 机制</title>
    <link href="http://yoursite.com/2016/04/12/python-import-%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2016/04/12/python-import-机制/</id>
    <published>2016-04-12T14:20:00.000Z</published>
    <updated>2016-04-13T15:10:25.000Z</updated>
    
    <content type="html">&lt;p&gt;首先看一个官方给出的&lt;a href=&quot;https://docs.python.org/2/whatsnew/2.5.html#pep-328-absolute-and-relative-imports&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;例子&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pkg/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkg/__init__.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkg/main.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkg/string.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;现在考虑一下,如果我在main中import string 会发生什么？是引入系统的string还是引入当前目录下的string。&lt;br&gt;在Python2.4之前的版本会在当前的目录下引入string.py，并且会把它绑定到pkg.main的命名空间。如果你想引入string标准库该怎么做呢？py.std提供了一个整洁的方法去引入，&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;py.std.strin.join()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但是这不是适用所有的Python版本。&lt;/p&gt;
&lt;p&gt;Python中有两种引入包的方式&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;相对引入&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在Python2.5之前是默认的引入方法。你可以通过使用from __future__ import absolute&lt;em&gt;import来使用绝对引入。&lt;br&gt;相对引入肯定是需要一个参照的对象，这里的参照物是谁呢？相对引入使用被引入文件的\&lt;/em&gt;_name__ 属性来决定该文件在整个包结构的位置。如果__name__ 的值为__main__，那么认为其为top level script，这个时候相对引入就没有引入的参照物，就会抛出ValueError: Attempted relative import in non-package的异常。&lt;br&gt;为了解决这个问题，PEP 0366 — Main module explicit relative imports提出了一个解决方案。&lt;br&gt;允许用户使用python -m source&lt;em&gt;folder.main的方式,来执行该文件。在这个方案下，引入了一个新的属性\&lt;/em&gt;_package__（会显示当前运行的程序所在的包的名称）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;绝对引入&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在Python2.7之后，绝对引入是Python默认的引入方式，import string 会去查找标准库的string模块。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;最后，对于两种引用的方式选择，还是有争论的。在PEP8中，Python官方推荐的是绝对引用,详细理由可以参考这儿。&lt;/p&gt;
&lt;p&gt;Absolute imports are recommended, as they are usually more readable and tend to be better behaved (or at least give better error messages) if the import system is incorrectly configured (such as when a directory inside a package ends up on sys.path ):&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; mypkg.sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; mypkg &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; mypkg.sibling &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; example&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;However, explicit relative imports are an acceptable alternative to absolute imports, especially when dealing with complex package layouts where using absolute imports would be unnecessarily verbose:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; . &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; .sibling &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; example&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Standard library code should avoid complex package layouts and always use absolute imports. Implicit relative imports should never be used and have been removed in Python 3.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;首先看一个官方给出的&lt;a href=&quot;https://docs.python.org/2/whatsnew/2.5.html#pep-328-absolute-and-relative-imports&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;例子&lt;/
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>sql中的unkonw</title>
    <link href="http://yoursite.com/2016/04/05/sql%E4%B8%AD%E7%9A%84unkonw/"/>
    <id>http://yoursite.com/2016/04/05/sql中的unkonw/</id>
    <published>2016-04-05T13:18:22.000Z</published>
    <updated>2016-04-06T15:02:32.000Z</updated>
    
    <content type="html">&lt;ol&gt;
&lt;li&gt;解释一下SQL里面的null&lt;br&gt;答案：null代表一个unknown的值或者一个不存在的值&lt;/li&gt;
&lt;li&gt;如何用SQL判断一个值是不是null?&lt;br&gt;答案：可以用is null来判断一个值是不是null&lt;/li&gt;
&lt;li&gt;所有包含null的计算表达式的返回结果都是null, 这句话正确吗？比如5+ null返回null&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;所有与null得比较运算都返回unknown正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;(unknown or true) = true正确吗？&lt;br&gt;答案：正确，进行的是或运算，就算不知道unknown不知道真假，但是or后面的true为真，所以最终结果为true。&lt;/li&gt;
&lt;li&gt;(unknown or false) = unknown正确吗？&lt;br&gt;答案：正确，&lt;/li&gt;
&lt;li&gt;(unknown or unknown) = unknown正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;(true and unknown) = unknown正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;(false and unknown) = false正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;(unknown and unknown) = unknown正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;li&gt;(not unknown) = unknown 正确吗？&lt;br&gt;答案：正确&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;刚开始看了以上面试题，觉得一点都不会，后来查询了mysql手册，顿时大唔。&lt;br&gt;对于SQL的新手，NULL值的概念常常会造成混淆，他们常认为NULL是与空字符串’’相同的事。&lt;br&gt;为了进行NULL处理，可使用IS NULL和IS NOT NULL操作符以及IFNULL()函数。&lt;/p&gt;
&lt;p&gt;在SQL中，NULL值与任何其它值的比较（即使是NULL）永远不会为“真”。包含NULL的表达式总是会导出NULL值，除非在关于操作符的文档中以及表达式的函数中作了其他规定。&lt;br&gt;后来又查看了&lt;a href=&quot;http://blog.sina.com.cn/gujinku&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.sina.com.cn/gujinku&lt;/a&gt; 这篇文章，下面是其中的一段话，&lt;/p&gt;
&lt;p&gt;因为NULL当UNKNOWN来理解，因此，当值为NULL时，它既有可能是FALSE也有可能是TRUE。如果计算结果只有一种可能，则取该种可能；如果计算结果既有可能是FALSE，也有可能是TRUE，那么结果便为NULL。例如，NOT NULL，其结果也有两种可能，因此NOT NULL的结果是NULL。再例如，NULL AND TRUE，则其结果也有两种可能，因此NULL AND TRUE的结果是NULL。但是，NULL OR TRUE，或是NULL AND FALSE，前者结果为TRUE，单是一个TRUE出现，便足以知道结果为TRUE；后者结果为FALSE，单是一个FALSE出现，便足以知道结果为FALSE。这是OR和AND的特性决定的。&lt;/p&gt;
&lt;p&gt;现在回过头来，看上面的问题，是不是觉得就很容易理解了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;解释一下SQL里面的null&lt;br&gt;答案：null代表一个unknown的值或者一个不存在的值&lt;/li&gt;
&lt;li&gt;如何用SQL判断一个值是不是null?&lt;br&gt;答案：可以用is null来判断一个值是不是null&lt;/li&gt;
&lt;li&gt;所有包含null的计算表达式的
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>python中的True,False</title>
    <link href="http://yoursite.com/2016/04/02/python%E4%B8%AD%E7%9A%84True-False/"/>
    <id>http://yoursite.com/2016/04/02/python中的True-False/</id>
    <published>2016-04-02T14:44:55.000Z</published>
    <updated>2016-04-02T14:48:40.000Z</updated>
    
    <content type="html">&lt;hr&gt;
&lt;p&gt;在Python中，0 == False， 1 == True 其余的既不是True，也不是False。&lt;br&gt;如果牵扯到bool计算时，除了’’、””、0、()、[]、{}、None为False之外，&lt;br&gt;其他的都是True。&lt;/p&gt;
&lt;p&gt;if 条件判断是在计算完后面表达式结束是，然后把计算结果进行bool计算。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;在Python中，0 == False， 1 == True 其余的既不是True，也不是False。&lt;br&gt;如果牵扯到bool计算时，除了’’、””、0、()、[]、{}、None为False之外，&lt;br&gt;其他的都是True。&lt;/p&gt;
&lt;p&gt;if 条件判断是在计
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
</feed>
